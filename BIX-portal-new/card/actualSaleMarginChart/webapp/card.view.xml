<mvc:View controllerName="bix.card.actualSaleMarginChart.card"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:vbm="sap.ui.vbm"
    xmlns:layout="sap.ui.layout"
    xmlns:table="sap.ui.table"
    xmlns="sap.m"
    width="100%"
    height="100%"
        xmlns:w="sap.ui.integration.widgets"
    displayBlock="true"
>
    <FlexBox width="100%" height="100%" class="sapUiTinyMarginTop"
        fitContainer="true" direction="Column" renderType="Bare" backgroundDesign="Solid">
        <OverflowToolbar style="Clear" width="100%" height="2.5rem" >
            <Title id="tempMessage" text="※ 현재 데이터가 없어 일부 값이 맞지 않을 수 있습니다." />

            <ToolbarSpacer />

            <HBox class="custom-select-box" width="30%" justifyContent="End">
                <Select
                    change=".onUiChange"
                    width="30%"
                    items="{path: 'selectModel>/'}">
                    <items>
                        <core:ListItem key="{selectModel>key}" text="{selectModel>name}"/>
                    </items>
                </Select>
            </HBox>
        </OverflowToolbar>

        <VBox visible='{=${UiModel>/key}==="org"}'>
            <w:Card manifest="../bix/card/actualSMTypeChartContainer/manifest.json" width="100%"/>
        </VBox>

        <VBox visible='{=${UiModel>/key}==="Account"}'>
            <w:Card manifest="../bix/card/actualSMAccountChartContainer/manifest.json" width="100%"/>
        </VBox>

        <vbm:AnalyticMap width="100%" height="700px" regionClick=".onRegionClick" initialZoom="1"
            initialPosition="120;0;0" class="custom-default-background" visible='{=${UiModel>/key}==="subsidiary"}'
            regions="{regionModel>/}">
            <vbm:regions>
                <vbm:Region code="{regionModel>code}" color="rgb(39,163,221)" tooltip="{regionModel>name}"  />
            </vbm:regions>       

            <vbm:Containers items="{regionModel>/}">
                <vbm:Container position="{regionModel>position}" >
                    <vbm:item>
                        <FlexBox width="auto" height="auto" direction="Column" fitContainer="true" backgroundDesign="Solid">
                            <Label text="{regionModel>name}" design="Bold"  />
                            <Text emptyIndicatorMode="On" text="매출: {= ${regionModel>sale} / 100000000}억원" 
                                tooltip="매출: {= ${regionModel>sale} / 100000000}억원" wrapping="false"/>
                            <Text emptyIndicatorMode="On" text="마진: {= ${regionModel>margin} / 100000000}억원" 
                                tooltip="매출: {= ${regionModel>margin} / 100000000}억원" wrapping="false"/>
                        </FlexBox>
                    </vbm:item>
                </vbm:Container>
            </vbm:Containers>
        </vbm:AnalyticMap>
    </FlexBox>
        
</mvc:View>