<mvc:View
    controllerName="bix.main.controller.App"
    displayBlock="true"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:tnt="sap.tnt"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:l="sap.ui.layout"
    xmlns:core="sap.ui.core"
    core:require="{ formatMessage: 'sap/base/strings/formatMessage' }"
>
    <tnt:ToolPage
        id="toolPage"
        sideExpanded="true"
        class="custom-portal-wrapper"
        
    >
        <tnt:header>
            <tnt:ToolHeader width="100%" style="Standard" height="3.75rem" class="custom-portalheader">
                <Image
                    src="./resource/image/logo.png"
                    press="onPressHome"
                    tooltip="{i18n>p_t_homebtn}"
                    class="sapUiTinyMarginBeginEnd custom-logo" >
                    <layoutData>
                        <OverflowToolbarLayoutData priority="NeverOverflow" shrinkable="false" />
                    </layoutData>
                </Image>

                <IconTabHeader id="iconTab"
                    class="custom-menutab"
                    visible="true" maxNestingLevel="0"
					backgroundDesign="Transparent" select="onNavToApp"
                    items="{path: 'main_menuModel>/',
                            filters: [{path: 'use_yn', operator: 'EQ', value1: true}]}" >
                    <items>
                        <IconTabFilter
                            text="{ path:'main_menuModel>i18nTitle_i18nKey',
                                    formatter: '.formatI18nMenuTitle'}"
                            enabled="{main_menuModel>use_yn}"
                            key="{main_menuModel>ID}">
                            <!-- items="{main_menuModel>Child}">
                            <items>
                                <IconTabFilter
                                    text="{ path:'main_menuModel>i18nTitle_i18nKey',
                                            formatter: '.formatI18nMenuTitle'}"
                                    enabled="{main_menuModel>use_yn}"
                                    key="{main_menuModel>ID}"/>
                            </items> -->
                        </IconTabFilter>
                    </items>
                </IconTabHeader>

                <OverflowToolbarButton icon="./resource/image/ai_smile.svg" press="onChatBot" type="Transparent" text="챗봇" class="custom-icon-btn"/>
                <SearchField placeholder="메뉴 검색" enabled="false" tooltip="미구현" width="10rem" visible="false"
                    class="sapUiTinyMarginEnd"
                    suggest="onSuggest"
                    suggestionItems="{path:'main_menuModel>/',filters: {path:'Menus_ID', operator: 'Contains', value1: '-'}}">
                    <SuggestionItem text="{i18nTitle_i18nText}" description="{description}" key="{ProductId}" />
                    <layoutData>
                        <OverflowToolbarLayoutData maxWidth="12rem" minWidth="6rem" shrinkable="true" priority="NeverOverflow"/>
                    </layoutData>
                </SearchField>
                <OverflowToolbarButton icon="sap-icon://search" press="onSearch" type="Transparent" text="검색"/>
                <OverflowToolbarButton icon="sap-icon://action-settings" press="onBookmark" type="Transparent" text="설정"/>
                <OverflowToolbarButton icon="sap-icon://bell" press="onNotice" type="Transparent" text="알람">
                    <customData >
                        <BadgeCustomData
                                key="badge"
                                value="{= ${userModel>/showAlarmFlag}?${ui>/alarmCount}:null}"
                        />
                    </customData>
                </OverflowToolbarButton>
                
                <Avatar
                    id="Avatar"
                    class="custom-portalheader-avatar"
                    backgroundColor="Accent10"
                    customDisplaySize="2.5rem"
                    displaySize="Custom"
                    press="onPressPersonal"
                >
                    <layoutData>
                        <OverflowToolbarLayoutData
                            priority="NeverOverflow"
                        />
                    </layoutData>
                </Avatar>
                <VBox class="custom-profile">
                    <Text text="______ 님(110394) / 전사기획" renderWhitespace="true"/>
                    <Text text="Senior Manager"/>
                </VBox>

            </tnt:ToolHeader>
        </tnt:header>
        <tnt:subHeader>
            <tnt:ToolHeader visible="false" class="submenu">
                <IconTabHeader />
            </tnt:ToolHeader>
        </tnt:subHeader>
        <tnt:sideContent>
            <tnt:SideNavigation id="sideNav"
                visible="{menuStr>/sideVisible}"
                expanded="true"
                selectedKey="{/selectedKey}"
                itemSelect=".onItemSelect"
                width="10rem"
            >
                <tnt:NavigationList id="navList"> <!--items="{path: 'main_menuModel>/'}"-->
                    <!-- <tnt:NavigationListGroup text="{ path:'main_menuModel>i18nTitle_i18nKey',
                                        formatter: '.formatI18nMenuTitle'}"
                        items="{path: 'main_menuModel>Child', templateShareable:false}">
                        <tnt:NavigationListItem
                            text="{ path:'main_menuModel>i18nTitle_i18nKey',
                                        formatter: '.formatI18nMenuTitle'}"
                            enabled="{main_menuModel>use_yn}"
                            icon="{main_menuModel>iconSrc}"
                            expanded="false"
                            selectable="false"
                            press="onClickTopMenu"
                            key="{main_menuModel>ID}"
                            items="{path: 'main_menuModel>Child',
                                    templateShareable:false}"
                        >
                            <tnt:NavigationListItem
                            
                                text="{ path:'main_menuModel>i18nTitle_i18nKey',
                                        formatter: '.formatI18nMenuTitle'}"
                                key="{main_menuModel>code}"
                                icon="{main_menuModel>iconSrc}"
                                enabled="{main_menuModel>use_yn}"
                                select="onSideMenuSelect"
                            />
                        </tnt:NavigationListItem>
                    </tnt:NavigationListGroup> -->
                </tnt:NavigationList>
                <tnt:fixedItem>
                    <tnt:NavigationList>
                        <tnt:NavigationListItem icon="sap-icon://org-chart" text="담당자 안내"/>
                        <tnt:NavigationListItem icon="sap-icon://action-settings" text="설정"/>
                        <tnt:NavigationListItem icon="sap-icon://sys-help" text="메뉴얼"/>
                        <tnt:NavigationListItem icon="sap-icon://email" text="시스템 문의"/>
                    </tnt:NavigationList>
                    <!-- <tnt:NavigationList items="{path: 'main_menuModel>/', filters: {path: 'i18nTitle_i18nKey', operator: 'Contains', value1: 'admin'}}">
                        <tnt:NavigationListItem
                            text="{ path:'main_menuModel>i18nTitle_i18nKey',
                                        formatter: '.formatI18nMenuTitle'}"
                            enabled="{main_menuModel>use_yn}"
                            expanded="true"
                            selectable="false"
                            press="onClickTopMenu"
                            key="{main_menuModel>ID}"
                        />
                    </tnt:NavigationList> -->
                </tnt:fixedItem>
            </tnt:SideNavigation>
        </tnt:sideContent>
        <tnt:mainContents>
            <f:FlexibleColumnLayout id="fcl" stateChange="onStateChanged" layout="{mainControl>/layout}" backgroundDesign="Solid" />
            <Image id="chatbotBtn" width="3.5rem" src="./resource/image/ai.png" class="custom-chatbot-btn" press="onExpandAI_Area"/>
        </tnt:mainContents>
    </tnt:ToolPage>
</mvc:View>
